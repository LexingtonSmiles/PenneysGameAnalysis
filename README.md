# Penney's Game Project

This repository stores the first project of DATA 440 in Fall 2025: Penney's Game.

- **Penney’s Game** is a paradoxical coin-tossing game where two players choose different sequences of coin flips (e.g., `HTH` vs `TTH`). Despite appearing fair, one sequence always has a probabilistic advantage over the other. Read the details of the Penney's Game [here](https://en.wikipedia.org/wiki/Penney%27s_game).
   - The authors note a general rule for picking your combination based on what the opponent chooses:
      - "For the first player's choice of 1-2-3 the second player must choose (not-2)-1 where (not-2) is the opposite of the second choice of the first player."
- **Humble–Nishiyama Randomness Game** is a variation of Penney’s Game which features a deck of playing cards that substitutes the heads and tails of a coin with 26 red cards and 26 black cards. Read the details of Humble–Nishiyama Randomness Game [here](https://mathwo.github.io/assets/files/penney_game/humble-nishiyama_randomness_game-a_new_variation_on_penneys_coin_game.pdf).
- We have added a third component to this game: how the game is scored. Originally, the player with the most tricks won comes out victorious. However, we have included an analysis of who would win based on the amount of cards won instead. Each time a player's sequence comes up, instead of counting that as one win, the number of cards in the current pile is added to their score, which determines who wins. When scoring this way, the general rule for picking the optimal combination does not provide the best combination 100% of the time.

## Purpose
The main purpose of this code is to reflect the best possible sequence to pick based on what the opponent chooses in a heatmap so you can always beat your friends >:)

The aim of this project is to:
- Generate and store randomized decks of outcomes.
- Provide tools for running simulations with reproducible randomness.
- Highlight empirical probabilities and confirm theoretical predictions.

## QUICK START GUIDE

To run the analysis of Penney's Game follow the steps below:
1) Install UV (if you have not yet done so).
   - This project is managed using UV. If you do not yet have UV installed or need help troubleshooting issues with UV, refer to their [documentation](https://docs.astral.sh/uv/guides/install-python/).
2) Download the repository
3) Navigate to the directory and run: **`uv sync`** to install dependencies.
5) Run the program with the command: **`uv run main.py`**
6) Chose whether or not to augment the data. It is recommended to respond with **`Yes`**.
7) Enter the number of decks you wish to add to the dataset.
8) Now analysis will run and the heatmaps of the empirical probabilites of winning (and drawing) will be generated and saved in the **`figures/`** folder.
   - If you chose not to augment the data, the heatmaps that contail the empirical probabilites will be (re)generated.

## File Descriptions

- **`main.py`**: The main entry point for the application. This script handles user interaction and orchestrates the data generation and analysis pipeline.

- **`data/`**: This directory contains the generated deck files. Each file is a NumPy array of simulated card decks.

- **`outputs/`**: This directory contains the results of the analysis. The `scoring_analysis.csv` file contains the win/loss/draw statistics for each player combination.

- **`figures/`**: This directory contains the heatmaps generated by `heatmap.py`.

- **`src/`**: This directory contains the source code for the project.
    - **`datageneration.py`**: This script contains functions for generating and saving the simulated card decks.
    - **`scoring.py`**: This script contains functions for loading the deck files, scoring the games, and calculating win/loss/draw statistics.
    - **`heatmap.py`**: This script contains functions for generating heatmaps from the scoring data.
    - **`wrappers.py`**: This script contains a decorator for measuring the performance of file read/write operations.
    
- **`DataGeneration.md`**: This file provides a detailed explanation of the data generation and storage methods that were tested and the results of those tests.

- **`Scoring.md`**: This file provides a detailed explanation of the scoring logic and the different methods that were considered.
